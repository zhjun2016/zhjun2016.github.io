<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>快速上手springboot | 逆风而行的蟋蟀</title><meta name="author" content="ajun"><meta name="copyright" content="ajun"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="快速上手springbootSpring Boot简介目的简化spring应用的初始搭建以及开发过程， 起步依赖，自动配置、配置辅助类（tomcat） 重点：parent 、starter 创建springBoot工程四种方式 基于idea创建SpringBoot工程(Spring Initializr) 基于官网创建SpringBoot工程（服务器地址：https:&#x2F;&#x2F;start&#x2F;sprin">
<meta property="og:type" content="article">
<meta property="og:title" content="快速上手springboot">
<meta property="og:url" content="https://zhjun2016.github.io/2023/04/23/java/springBoot/SpringBoot%E5%AD%A6%E4%B9%A0-%E9%BB%91%E9%A9%AC-%E5%9F%BA%E7%A1%80%E7%AF%87/index.html">
<meta property="og:site_name" content="逆风而行的蟋蟀">
<meta property="og:description" content="快速上手springbootSpring Boot简介目的简化spring应用的初始搭建以及开发过程， 起步依赖，自动配置、配置辅助类（tomcat） 重点：parent 、starter 创建springBoot工程四种方式 基于idea创建SpringBoot工程(Spring Initializr) 基于官网创建SpringBoot工程（服务器地址：https:&#x2F;&#x2F;start&#x2F;sprin">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-04-23T02:26:53.000Z">
<meta property="article:modified_time" content="2023-04-24T05:43:31.522Z">
<meta property="article:author" content="ajun">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://zhjun2016.github.io/2023/04/23/java/springBoot/SpringBoot%E5%AD%A6%E4%B9%A0-%E9%BB%91%E9%A9%AC-%E5%9F%BA%E7%A1%80%E7%AF%87/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '快速上手springboot',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-24 13:43:31'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="逆风而行的蟋蟀"><span class="site-name">逆风而行的蟋蟀</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">快速上手springboot</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-23T02:26:53.000Z" title="发表于 2023-04-23 10:26:53">2023-04-23</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-24T05:43:31.522Z" title="更新于 2023-04-24 13:43:31">2023-04-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="快速上手springboot"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><meta name="referrer" content="no-referrer" />

<h3 id="快速上手springboot"><a href="#快速上手springboot" class="headerlink" title="快速上手springboot"></a>快速上手springboot</h3><h5 id="Spring-Boot简介"><a href="#Spring-Boot简介" class="headerlink" title="Spring Boot简介"></a>Spring Boot简介</h5><p>目的简化spring应用的初始搭建以及开发过程，</p>
<p>起步依赖，自动配置、配置辅助类（tomcat<br>）</p>
<p>重点：parent 、starter</p>
<h5 id="创建springBoot工程四种方式"><a href="#创建springBoot工程四种方式" class="headerlink" title="创建springBoot工程四种方式"></a>创建springBoot工程四种方式</h5><ul>
<li>基于idea创建SpringBoot工程(Spring Initializr)</li>
<li>基于官网创建SpringBoot工程（服务器地址：<a target="_blank" rel="noopener" href="https://start/spring.io">https://start/spring.io</a> ,网页配置项目，下载zip包，导入工程）</li>
<li>基于阿里云创建SpringBoot工程（服务器地址改为阿里云 <a target="_blank" rel="noopener" href="https://start/aliyun.com%EF%BC%89">https://start/aliyun.com）</a></li>
<li>手工创建maven工程，添加依赖，修改为springBoot工程</li>
</ul>
<ol>
<li>基于idea创建SpringBoot工程(Spring Initializr)</li>
</ol>
<p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711162454038.png" alt="image-20220711162454038"></p>
<ol start="2">
<li>基于官网创建SpringBoot工程</li>
</ol>
<p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711162646812.png" alt="image-20220711162646812"></p>
<ol start="3">
<li>基于阿里云创建SpringBoot工程</li>
</ol>
<p>​	和Spring Initializr方式差不多，修改服务器地址，联网速度快</p>
<ol start="4">
<li><p>手动创建方式：</p>
</li>
<li><p>创建普通maven工程</p>
</li>
<li><p>继承spring-boot-starter-parent</p>
</li>
<li><p>添加spring-boot-starter-web依赖</p>
</li>
<li><p>添加appliaction类，并制作为springboot入口</p>
</li>
</ol>
<h5 id="隐藏指定文件-x2F-文件夹"><a href="#隐藏指定文件-x2F-文件夹" class="headerlink" title="隐藏指定文件&#x2F;文件夹"></a>隐藏指定文件&#x2F;文件夹</h5><p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711163644824.png" alt="image-20220711163644824"></p>
<p>idea–&gt;setting–&gt;editor–&gt;file  types –&gt;Ignored Files and Folders,</p>
<p>输入隐藏文件&#x2F;文件夹，回车；</p>
<img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711163940371.png" alt="image-20220711163940371" style="zoom: 80%;" />



<h5 id="parent使用"><a href="#parent使用" class="headerlink" title="parent使用"></a>parent使用</h5><p>依赖管理，减少依赖冲突</p>
<ol>
<li><p>开发springboot 程序要继承spring -boot -starter -parent</p>
</li>
<li><p>spring -boot -starter -parent中定义了若干依赖管理，主要是继承spring-boot-dependencies实现版本自动化管理，（依赖传递）</p>
</li>
<li><p>继承parent模板可以避免多个依赖使用相同技术出现版本冲突</p>
</li>
<li><p>继承parent模板形式，可以采用引入spring-boot-dependencies形式实现parent的效果</p>
<p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711170151443.png" alt="image-20220711170151443"></p>
</li>
</ol>
<h5 id="starter使用"><a href="#starter使用" class="headerlink" title="starter使用"></a>starter使用</h5><p>定义了当前项目使用的所有依赖坐标，减少依赖配置；使用它实现快速配置，简化配置的目的；用什么导入什么；</p>
<p>实际开发</p>
<p>如果发生坐标错误，在指定version（注意版本冲突）</p>
<p>SpringBootApplication</p>
<ul>
<li><p>启动方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootApplication</span><br><span class="line">public class Springboot0101QuickstartApplication &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        ConfigurableApplicationContext ctx = SpringApplication.run(Springboot0101QuickstartApplication.class, args);</span><br><span class="line">        BookController bookController = ctx.getBean(BookController.class);</span><br><span class="line">        System.out.println(&quot;bookController----&quot;+bookController);</span><br><span class="line">        User userBean = ctx.getBean(User.class);</span><br><span class="line">        System.out.println(&quot;userBean----&quot;+userBean);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>引导类是Boot工程的执行入口，运行main方法可以启动项目</p>
</li>
<li><p>工程运行后初始化Spring容器，扫描引导类所在包加载bean;</p>
</li>
</ul>
<h5 id="辅助功能"><a href="#辅助功能" class="headerlink" title="辅助功能"></a>辅助功能</h5><ul>
<li><p>内置tomcat服务器，是springboot辅助功能之一，默认tomcat，可以替换新的服务器</p>
</li>
<li><p>内嵌tomact工作原理，将tomcat服务器作为对象运行，交给spring容器管理；</p>
</li>
<li><p>可变更内嵌服务器，添加新的服务器</p>
<p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711173256982.png" alt="image-20220711173256982"></p>
</li>
</ul>
<p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220711173427305.png" alt="image-20220711173427305"></p>
<p>可以通过exclusions排查依赖，再添加需要依赖，譬如服务器。如果无服务器，控制台不打印服务器型号，端口；</p>
<h5 id="补-知识加油站–Rest风格简介"><a href="#补-知识加油站–Rest风格简介" class="headerlink" title="[补]知识加油站–Rest风格简介"></a>[补]知识加油站–Rest风格简介</h5><ul>
<li><p>Rest 表现形式状态转换</p>
<ul>
<li><p>​	传统风格资源描述形式</p>
<p><a target="_blank" rel="noopener" href="http://localhost/user/getById?id=1">http://localhost/user/getById?id=1</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost/user/saveUser">http://localhost/user/saveUser</a></p>
</li>
<li><p>REST风格描述形式</p>
<p><a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a></p>
</li>
</ul>
</li>
</ul>
<p>​		  	<a target="_blank" rel="noopener" href="http://localhost/users">http://localhost/users</a></p>
<p>​		优点: </p>
<p>​				隐藏资源的访问行为， 无法通过地址得知对资源是何种操作；</p>
<p>​				书写简化；</p>
<ul>
<li><p>根据REST风格对资源进行访问称为RESTful</p>
<p>行为动作区分进行了何种操作</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost/users">http://localhost/users</a> 	查询全部用户信息   <strong>GET(查询)</strong></li>
<li><a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a>    查询指定用户信息   <strong>GET(查询)</strong></li>
<li><a target="_blank" rel="noopener" href="http://localhost/users">http://localhost/users</a> 	添加用户信息   <strong>POST(新增&#x2F;保存)</strong></li>
<li><a target="_blank" rel="noopener" href="http://localhost/users">http://localhost/users</a> 	修改用户信息   <strong>PUT(修改&#x2F;更新)</strong></li>
<li><a target="_blank" rel="noopener" href="http://localhost/user/1">http://localhost/user/1</a>	删除用户信息   <strong>DELETE(删除)</strong></li>
</ul>
</li>
</ul>
<p>​       常用4个动作:   GET查询,POST新增&#x2F;保存,PUT修改&#x2F;更新,DELETE删除</p>
<p>​		<strong>注意</strong>: 上述行为是约定方式,约定不是规范,可以打破,所以是REST风格,描述模块的&#96;					名称通常使用函数,也就是加s的格式描述,例如:users,books,…</p>
<p>​       注解: @RequestBody	@RequestParm	@PathVariable  @RestController</p>
<ul>
<li><p>区别</p>
<ul>
<li>@RequestParm用于接受url地址传参或者表单传参, 参数较少的情况</li>
<li>@RequestBody用于接受json数据</li>
<li>@PathVariable用于接受路径参数,使用{参数名称}描述路径参数</li>
</ul>
</li>
<li><p>应用</p>
<ul>
<li>后期开发中,发送请求参数超过1个时,以json格式为主,@RequestBody应用较广</li>
<li>如果发送非json格式数据,选用@RequestParm接受参数</li>
<li>采用RESTful进行开发,当参数数量较少时譬如1个,可采用@PathVariable接受路径变量,通常用于传递id值.</li>
<li>@RestController&#x3D;@RequestBody+@Controller, 可以简化写法</li>
</ul>
</li>
</ul>
<p>①:设定http请求动作(动词)</p>
<p>使用 @RequestMapping 注解的 method 属性声明请求的方式</p>
<p>使用 @RequestBody 注解 获取请求体内容。直接使用得到是 key&#x3D;value&amp;key&#x3D;value…结构的数据。get 请求方式不适用。</p>
<p>使用@ResponseBody 注解实现将 controller 方法返回对象转换为 json 响应给客户端。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(value=&quot;/users&quot;,method=RequestMethod.POST)</span><br></pre></td></tr></table></figure>



<p>②:设定请求参数(路径变量)</p>
<p>使用<code>@PathVariable</code> 用于绑定 url 中的占位符。例如：请求 url 中 &#x2F;delete&#x2F;<code>&#123;id&#125;</code>，这个<code>&#123;id&#125;</code>就是 url 占位符。</p>
<p><strong>@RequestParam</strong>:使用@RequestParam 注解用来标注在控制器方法的参数上，springmvc 从 request 中获取请求的值赋值给方法的参数@RequestParam 指定 name 时，可以获取 request 中指定参数的值，相当于 request.getParameter(name)或 request.getParameters(name)@RequestParam 未指定 name，参数类型为：Map&lt;String,String&gt;时，用来接收 request 中所有参数的值，Map 中 key 为参数名称，value 为参数的值@RequestParam 未指定 name，参数类型为 MultiValueMap&lt;String, String&gt;时，用来接收 request 中所有参数的值，key 为请求中的参数名称，value 为值的集合 List<String></p>
<h5 id="基础配置"><a href="#基础配置" class="headerlink" title="基础配置"></a>基础配置</h5><h5 id="复制模块"><a href="#复制模块" class="headerlink" title="复制模块"></a>复制模块</h5><p><strong>原则</strong>：保留工程基础结构，抹掉原始工程痕迹</p>
<ol>
<li><p>在工作空间中复制对应的工程，并修改工程名称；</p>
</li>
<li><p>删除与Idea相关的配置文集，仅保留src目录与pom.xml文件</p>
</li>
<li><p>修改pom.xml文件中的artifactId与新工程&#x2F;模块名相同</p>
</li>
<li><p>删除name标签（可选）</p>
</li>
<li><p>保留备份工程供后期使用;</p>
</li>
</ol>
<h4 id="动态配置刷新"><a href="#动态配置刷新" class="headerlink" title="动态配置刷新"></a>动态配置刷新</h4><p>引入必要依赖和配置</p>
<pre><code>    &lt;!-- 使用@RefreshScope注解 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;
        &lt;version&gt;2.6.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 使用actuator实现手动刷新 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
        &lt;artifactId&gt;spring-cloud-context&lt;/artifactId&gt;
        &lt;version&gt;3.0.4&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<p>application.yml添加配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#注意2.0.3版本后暴露/refresh接入点的方式与旧版本不同，需要手动设置暴露点。</span><br><span class="line">management:</span><br><span class="line">  endpoints:</span><br><span class="line">    web:</span><br><span class="line">      exposure:</span><br><span class="line">        include: &quot;*&quot; #默认值暴露 /actuator/info和/actuator/health，没有暴露/actuator/bus-refresh，这里把所有endpoints都暴露</span><br><span class="line"></span><br><span class="line">server:</span><br><span class="line"></span><br><span class="line">port: 1234 #actuator的端口可以单独定义，如果不定义的话，默认为&#123;server.port&#125;</span><br></pre></td></tr></table></figure>





<p>@RefreshScope 实现配置的动态刷新需要满足一下几点条件：</p>
<ol>
<li><p>@Scope注解</p>
</li>
<li><p>@RefreshScope注解</p>
</li>
<li><p>RefreshScope类</p>
</li>
<li><p>GenericScope类</p>
</li>
<li><p>Scope接口</p>
</li>
<li><p>ContextRefresher类 </p>
<p>@RefreshScope 能实现动态刷新全仰仗着@Scope 这个注解</p>
</li>
</ol>
<h5 id="二、-RefreshScope注意事项"><a href="#二、-RefreshScope注意事项" class="headerlink" title="二、@RefreshScope注意事项"></a>二、@RefreshScope注意事项</h5><h4 id="1-RefreshScope使用注意事项"><a href="#1-RefreshScope使用注意事项" class="headerlink" title="1. @RefreshScope使用注意事项"></a>1. @RefreshScope使用注意事项</h4><ol>
<li>@RefreshScope作用的类，<code>不能是final类</code>，否则启动时会报错。</li>
<li>@RefreshScope不能单独使用，需要和其他其他bean注解结合使用，如：@Controller、@Service、@Component、@Repository、@Configuration等。</li>
<li>@RefreshScope 最好不要修饰在 @Scheduled、listener、Timmer等类中,因为配置的刷新会导致原来的对象被清除，需要重新使用对象才能出发生成新对象（但因为对象没了，又没法重新使用对象，死循环）</li>
</ol>
<h4 id="2-RefreshScope动态刷新失效"><a href="#2-RefreshScope动态刷新失效" class="headerlink" title="2. @RefreshScope动态刷新失效"></a>2. @RefreshScope动态刷新失效</h4><ol>
<li>考虑使用的bean是否是@RefreshScope生成的那个scopedTarget.beanName的 bean</li>
<li>springboot某些低版本貌似有问题，在Controller类上使用不会生效（网上有这么说的，没具体研究）<br>解决方法1：注解上加属性@RefreshScope(proxyMode &#x3D; ScopedProxyMode.DEFAULT)<br>解决方法2：直接使用其他类单独封装配置参数，使用@RefreshScope+@Value方式<br>解决方法3：直接使用@ConfigurationProperties</li>
</ol>
<h4 id="3-不使用-RefreshScope也能实现动态刷新"><a href="#3-不使用-RefreshScope也能实现动态刷新" class="headerlink" title="3. 不使用@RefreshScope也能实现动态刷新"></a>3. 不使用@RefreshScope也能实现动态刷新</h4><p>直接使用@ConfigurationProperties，并不需要加@RefreshScope就能实现动态更新。</p>
<p>@ConfigurationProperties实现动态刷新的原理：<br>@ConfigurationProperties有ConfigurationPropertiesRebinder这个监听器，监听着EnvironmentChangeEvent事件。当发生EnvironmentChange事件后，会重新构造原来的加了@ConfigurationProperties注解的Bean对象。这个是Spring Cloud的默认实现</p>
<p><strong>测试类</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">//类</span><br><span class="line">@RefreshScope</span><br><span class="line">@Component</span><br><span class="line">public class TestConfig &#123;</span><br><span class="line">    public static int url;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;pesticide.url&#125;&quot;)</span><br><span class="line">    public void setUrl(int url) &#123;</span><br><span class="line">        TestConfig.url = url;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public void getUrl() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">//测试</span><br><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;test&quot;)</span><br><span class="line">public class TestController &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private TestConfig testConfig;</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;testConfig&quot;)</span><br><span class="line">    public int testConfig()&#123;</span><br><span class="line">        System.out.println(&quot;TestConfig:&quot;+ TestConfig.url);</span><br><span class="line">        testConfig.getUrl();</span><br><span class="line">        System.out.println(&quot;TestConfig:&quot;+ TestConfig.url);</span><br><span class="line">        return TestConfig.url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h5 id="属性配置"><a href="#属性配置" class="headerlink" title="属性配置"></a>属性配置</h5><h5 id="Spring中的-Value注解详解"><a href="#Spring中的-Value注解详解" class="headerlink" title="Spring中的@Value注解详解"></a>Spring中的@Value注解详解</h5><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_31960623/article/details/116902786">https://blog.csdn.net/qq_31960623/article/details/116902786</a></p>
<p>　@Value 的作用不用说 大家都知道 注解模式下 读取配置文件 注入属性值</p>
<p>在使用spring框架的项目中，@Value是经常使用的注解之一。其功能是将与配置文件中的键对应的值分配给其带注解的属性。在日常使用中，我们常用的功能相对简单。本文使您系统地了解@Value的用法。</p>
<p>@Value 注解可以用来将外部的值动态注入到 Bean 中，在 @Value 注解中，可以使${} 与 #{} ，它们的区别如下：</p>
<p>（1）@Value(“${}”)：可以获取对应属性文件中定义的属性值。</p>
<p>（2）@Value(“#{}”)：表示 SpEl 表达式通常用来获取 bean 的属性，或者调用 bean 的某个方法。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/atliwen/p/5729670.html">spring @Value 设置默认值</a></p>
<p> 给@Value注解配置项给个默认值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> #方法1</span><br><span class="line">@Value(&quot;$&#123;server.web.domain:#&#123;null&#125;&#125;&quot;)</span><br><span class="line">private String domain;</span><br><span class="line"></span><br><span class="line">  #方法2</span><br><span class="line">@Value(&quot;$&#123;server.web.domain:xxx&#125;&quot;)</span><br><span class="line"> private String domain;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>　　设置默认值的好处 </p>
<p>　　　　可以减少配置文件需要配置的数据，更加简单化	</p>
<ul>
<li><p>修改配置</p>
<ul>
<li><p>修改服务器端口</p>
<p>application.properties文件，输入关键字会有键值对提示，用什么就输入什么和start引用有关，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#修改服务器端口</span><br><span class="line">server.port=80</span><br><span class="line">#修改banner</span><br><span class="line">#spring.main.banner-mode=off</span><br><span class="line">spring.banner.image.location=logo.png</span><br><span class="line"></span><br><span class="line">#设置日志相关</span><br><span class="line">logging.level.root=info</span><br><span class="line">#logging.level.com.itheima=warn</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="配置文件加载优先级"><a href="#配置文件加载优先级" class="headerlink" title="配置文件加载优先级"></a>配置文件加载优先级</h5><ol>
<li><p>支持多种属性文件格式，</p>
<ul>
<li><p>properties	(传统格式&#x2F;默认格式)	</p>
</li>
<li><p>yml (主流格式)</p>
</li>
<li><p>yaml</p>
<p><img src="https://img-blog.csdnimg.cn/76cb70b654bc412f8f46c7dd19a8d1e0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pqX5oGL6Iqx6aaZ,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
</ul>
</li>
<li><p>配置加载优先顺序</p>
<p>application.properties &gt; application.yml &gt; application.yaml</p>
</li>
<li><p>不同配置文件中相同配置按照加载优先级相互覆盖 (<strong>高优先级配置内容会覆盖低优先级配置内容</strong>)，不同配置文件中不同配置全部保留</p>
</li>
</ol>
<blockquote>
<p>默认SpringBoot会加载classpath:application.yml、classpath:config&#x2F;application.yml等路径下的配置文件，但是上述规则子模块之间会相互覆盖，最终只有一个application.yml配置文件生效</p>
<p>如果在多个模块中都有application.yml文件，则会只读取有主启动类中的yml文件，不会读取其他模块中的配置文件，例如：在A模块中有一个application.yml文件，在B模块中有一个application.yml，如果启动A模块中的主启动类，则只会加载A模块中的application.yml文件，并不会加载B模块中的application.yml文件。</p>
<p>解决方案：</p>
<p>第一步：修改其他模块中的yml文件的名字为application-xxx.yml</p>
<p>第二步：在主启动模块中的application.yml中配置如下内容</p>
<p>spring:</p>
<p>  profiles:</p>
<p>  active: xxx</p>
<p>即可解决springBoot中多模块配置文件中读取配置文件问题</p>
<p>springboot多模块多环境配置文件问题（动态配置生产和开发环境）</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_23145857/article/details/90473667">https://blog.csdn.net/qq_23145857/article/details/90473667</a></p>
</blockquote>
<p>自动提示功能消失解决方案（解决配置文件输入图自动提示功能）</p>
<ol>
<li>指定SpringBoot配置文件<br>Setting → Project Structure → Facets<br>选中对应项目&#x2F;工程<br>Customize Spring Boot<br>选择配置文件</li>
</ol>
<img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220712133515117.png" alt="image-20220712133515117" style="zoom:80%;" />

<p>​		</p>
<p>18-yaml数据格式</p>
<p>yaml</p>
<ul>
<li>YAML（YAML Ain’t Markup Language），一种数据序列化格式</li>
</ul>
<ol>
<li>优点：<ul>
<li>容易阅读</li>
<li>容易与脚本语言交互</li>
<li>以数据为核心，重数据轻格式</li>
</ul>
</li>
<li>YAML文件扩展名<ul>
<li>.yml（<strong>主流</strong>）</li>
<li>.yaml</li>
</ul>
</li>
</ol>
<p>yaml语法规则<br>基本语法<br>key: value -&gt; value 前面一定要有空格<br>大小写敏感<br>属性层级关系使用多行描述，每行结尾使用冒号结束<br>使用缩进表示层级关系，同层级左侧对齐，只允许使用空格（不允许使用Tab键）<br>属性值前面添加空格（属性名与属性值之间使用冒号+空格作为分隔）</p>
<p>表示注释</p>
<p>核心规则：数据前面要加空格与冒号隔开<br>server:<br>  servlet:<br>    context-path: &#x2F;hello<br>  port: 82</p>
<p>数据类型</p>
<ul>
<li>字面值表示方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 字面值表示方式</span><br><span class="line"></span><br><span class="line">boolean: TRUE       #TRUE,true,True,FALSE,false ， False 均可</span><br><span class="line">float: 3.14         #6.8523015e+5 # 支持科学计数法</span><br><span class="line">int: 123            #0b1010_0111_0100_1010_1110 # 支持二进制、八进制、十六进制</span><br><span class="line"></span><br><span class="line"># null: ~             # 使用 ~ 表示 null</span><br><span class="line"></span><br><span class="line">string: HelloWorld  # 字符串可以直接书写</span><br><span class="line">string2: &quot;Hello World&quot;  # 可以使用双引号包裹特殊字符</span><br><span class="line">date: 2018-02-17        # 日期必须使用 yyyy-MM-dd 格式</span><br><span class="line">datetime: 2018-02-17T15:02:31+08:00   # 时间和日期之间使用 T 连接，最后使用 + 代表时区</span><br></pre></td></tr></table></figure>

<ul>
<li><p>数组表示方式：在属性名书写位置的下方使用减号作为数据开始符号，每行书写一个数据，减号与数据间空格分隔</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">subject:</span><br><span class="line"></span><br><span class="line">  - Java</span><br><span class="line">  - 前端</span><br><span class="line">  - 大数据</span><br><span class="line"></span><br><span class="line">enterprise:</span><br><span class="line">  name: zhangsan</span><br><span class="line">  age: 16</span><br><span class="line"></span><br><span class="line">subject2:</span><br><span class="line"></span><br><span class="line">  - Java</span><br><span class="line">  - 前端</span><br><span class="line">  - 大数据</span><br><span class="line">    likes: [王者荣耀,刺激战场] # 数组书写缩略格式</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">users: # 对象数组格式</span><br><span class="line"></span><br><span class="line">  - name: Tom</span><br><span class="line">    age: 4</span><br><span class="line"></span><br><span class="line">  - name: Jerry</span><br><span class="line">    age: 5</span><br><span class="line">    users2: # 对象数组格式二</span><br><span class="line">      -</span><br><span class="line">    name: Tom</span><br><span class="line">    age: 4</span><br><span class="line">      -</span><br><span class="line">    name: Jerry</span><br><span class="line">    age: 5</span><br><span class="line"></span><br><span class="line"># 对象数组缩略格式</span><br><span class="line"></span><br><span class="line">users3: [ &#123; name:Tom , age:4 &#125; , &#123; name:Jerry , age:5 &#125; ]</span><br></pre></td></tr></table></figure>

<p>小结:</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. yaml语法规则</span><br><span class="line">   大小写敏感</span><br><span class="line">   属性层级关系使用多行描述，每行结尾使用冒号结束</span><br><span class="line">   使用缩进表示层级关系，同层级左侧对齐，只允许使用空格（不允许使用Tab键）</span><br><span class="line">   属性值前面添加空格（属性名与属性值之间使用冒号+空格作为分隔）</span><br><span class="line"></span><br><span class="line">   # 表示注释</span><br><span class="line"></span><br><span class="line">2. 注意属性名冒号后面与数据之间有一个空格</span><br><span class="line"></span><br><span class="line">3. 字面值、对象数据格式、数组数据格式（略）</span><br></pre></td></tr></table></figure>

<p>19-读取yaml单一属性数据</p>
<ul>
<li><p>使用@Value读取单个数据，属性名引用方式：${一级属性名.二级属性名……}</p>
<p><img src="https://img-blog.csdnimg.cn/18fece154b904361b4504388b8eddf86.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pqX5oGL6Iqx6aaZ,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Value(&quot;$&#123;country&#125;&quot;)</span><br><span class="line">private String country1;</span><br><span class="line">  </span><br><span class="line">@Value(&quot;$&#123;user.age&#125;&quot;)</span><br><span class="line">private String age1;</span><br><span class="line">  </span><br><span class="line">@Value(&quot;$&#123;likes[1]&#125;&quot;)</span><br><span class="line">private String likes1;</span><br><span class="line">  </span><br><span class="line">@Value(&quot;$&#123;users[1].name&#125;&quot;)</span><br><span class="line">private String name1;</span><br></pre></td></tr></table></figure>




<p>  @GetMapping<br>  public String getById() {<br>  System.out.println(“springboot is running2…”);<br>  System.out.println(“country1&#x3D;&gt;” + country1);<br>  System.out.println(“age1&#x3D;&gt;” + age1);<br>  System.out.println(“likes1&#x3D;&gt;” + likes1);<br>  System.out.println(“name1&#x3D;&gt;” + name1);<br>  return “springboot is running2…”;<br>  }</p>
</li>
</ul>
<p>小结:</p>
<ol>
<li>使用@Value配合SpEL读取单个数据</li>
<li>如果数据存在多层级，依次书写层级名称即可</li>
</ol>
<p>20-yaml文件中的变量引用</p>
<ul>
<li><p>在配置文件中可以使用属性名引用方式引用属性</p>
<p><img src="https://img-blog.csdnimg.cn/1d1e401037e442b09005e175ae93ff3a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pqX5oGL6Iqx6aaZ,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
</li>
<li><p>属性值中如果出现转移字符，需要使用双引号包裹</p>
</li>
</ul>
<p>小结:</p>
<ol>
<li>在配置文件中可以使用${属性名}方式引用属性值</li>
<li>如果属性中出现特殊字符，可以使用双引号包裹起来作为字符解析</li>
</ol>
<p>21-读取yaml全部属性数据</p>
<ul>
<li>封装全部数据到Environment对象</li>
<li>注意 要导这个 包</li>
<li><strong>import org.springframework.core.env.Environment;</strong></li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/1700017907384046addf32a0e2415f3a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pqX5oGL6Iqx6aaZ,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<p>22-读取yaml引用类型属性数据</p>
<p>自定义对象封装指定数据</p>
<p>自定义对象封装指定数据的作用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 创建类，用于封装下面的数据</span><br><span class="line"></span><br><span class="line"># 由spring帮我们去加载数据到对象中，一定要告诉spring加载这组信息</span><br><span class="line"></span><br><span class="line"># 使用时候从spring中直接获取信息使用</span><br><span class="line"></span><br><span class="line">datasource:</span><br><span class="line">  driver: com.mysql.jdbc.Driver</span><br><span class="line">  url: jdbc:mysql://localhost/springboot_db</span><br><span class="line">  username: root</span><br><span class="line">  password: root666123</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//1.定义数据模型封装yaml文件中对应的数据</span><br><span class="line">//2.定义为spring管控的bean</span><br><span class="line">@Component</span><br><span class="line">//3.指定加载的数据</span><br><span class="line">@ConfigurationProperties(prefix = &quot;datasource&quot;)</span><br><span class="line">public class MyDataSource &#123;</span><br><span class="line"></span><br><span class="line">    private String driver;</span><br><span class="line">    private String url;</span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line">    </span><br><span class="line">    //省略get/set/tostring 方法</span><br><span class="line"></span><br><span class="line">&#125;    </span><br><span class="line">controller中引用，输出myDataSource</span><br><span class="line"> @Autowired</span><br><span class="line"> private MyDataSource myDataSource;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>小结:</p>
<ol>
<li>使用@ConfigurationProperties注解绑定配置信息到封装类中</li>
<li>封装类需要定义为Spring管理的bean，否则无法进行属性注入</li>
</ol>
<p>23-SpringBoot整合JUnit</p>
<ul>
<li>添加Junit的起步依赖 Spring Initializr 创建时自带</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--测试的起步依赖--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>SpringBoot整合JUnit</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest</span><br><span class="line">class Springboot07JunitApplicationTests &#123;</span><br><span class="line">	@Autowired</span><br><span class="line">	private BookService bookService;</span><br><span class="line">	@Test</span><br><span class="line">	public void testSave()&#123;</span><br><span class="line">		bookService.save();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>@SpringBootTest<br>名称：@SpringBootTest<br>类型：测试类注解<br>位置：测试类定义上方<br>作用：设置JUnit加载的SpringBoot启动类<br>范例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest</span><br><span class="line">class Springboot05JUnitApplicationTests &#123;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>小结:</p>
<ol>
<li>导入测试对应的starter</li>
<li>测试类使用@SpringBootTest修饰</li>
<li>使用自动装配的形式添加要测试的对象</li>
</ol>
<p>24-整合JUnit——classes属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest(classes = Springboot04JunitApplication.class)</span><br><span class="line">//@ContextConfiguration(classes = Springboot04JunitApplication.class)</span><br><span class="line">class Springboot04JunitApplicationTests &#123;</span><br><span class="line">    //1.注入你要测试的对象</span><br><span class="line">    @Autowired</span><br><span class="line">    private BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    void contextLoads() &#123;</span><br><span class="line">        //2.执行要测试的对象对应的方法</span><br><span class="line">        bookDao.save();</span><br><span class="line">        System.out.println(&quot;two...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意:</p>
<ul>
<li>如果测试类在SpringBoot启动类的包或子包中，可以省略启动类的设置，也就是省略classes的设定</li>
</ul>
<p>小结:</p>
<ol>
<li>测试类如果存在于引导类所在包或子包中无需指定引导类</li>
<li>测试类如果不存在于引导类所在的包或子包中需要通过 classes 属性指定引导类</li>
</ol>
<h5 id="在-yml配置文件中获取数据"><a href="#在-yml配置文件中获取数据" class="headerlink" title="在.yml配置文件中获取数据"></a>在.yml配置文件中获取数据</h5><p>自定义配置文件在.yml模块填写属性，格式必须application-xxx.yml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">application-test.yml</span><br><span class="line">weixin:</span><br><span class="line">   appid: 1233</span><br><span class="line">   sercet: xjkkkk</span><br><span class="line"></span><br><span class="line">tools: car,train,air</span><br></pre></td></tr></table></figure>

<p>主模块（含有application启动器）的.yml中，配置自定义文件名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  profiles:</span><br><span class="line">    active: local,mpeople</span><br><span class="line">    #include: local,mpeople</span><br></pre></td></tr></table></figure>



<p>controll注入，并调用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">@Controller(&quot;webPeopleWeixin&quot;)</span><br><span class="line">@RequestMapping(&quot;/weixin/&quot;)</span><br><span class="line">public class WeiXinAction &#123;</span><br><span class="line">	@Resource</span><br><span class="line">	WxTestBean wxTestBean;</span><br><span class="line"></span><br><span class="line">	@Value(&quot;$&#123;weixin.appid&#125;&quot;)</span><br><span class="line">	private String wxAppid;</span><br><span class="line"></span><br><span class="line">	@Value(&quot;$&#123;tools&#125;&quot;)</span><br><span class="line">	private List&lt;String &gt; toolsList;</span><br><span class="line"></span><br><span class="line">	 @GetMapping(value = &quot;/test&quot;)</span><br><span class="line">   	 @ResponseBody</span><br><span class="line">    	public String test(@RequestParam(&quot;code&quot;)String code, HttpServletRequest request, HttpServletResponse response)&#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;----wxbean:&quot;+JSONUtil.toJsonStr(wxTestBean));</span><br><span class="line">        System.out.println(&quot;----wxappid:&quot;+wxAppid);</span><br><span class="line">        System.out.println(&quot;----toolsList:&quot;+toolsList);</span><br><span class="line">        return &quot;*********测试**********&quot;;</span><br><span class="line">    	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>









<p>25-SpringBoot整合<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=MyBatis&spm=1001.2101.3001.7020">MyBatis</a></p>
<p>①：创建新模块，选择Spring初始化（引导模式），并配置模块相关基础信息</p>
<p>②：选择当前模块需要使用的技术集（MyBatis、MySQL）</p>
<p>③：设置数据源参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#DB Configuration:</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://localhost:3306/springboot_db</span><br><span class="line">    username: root</span><br><span class="line">    password: 123456</span><br></pre></td></tr></table></figure>

<p>④：创建user表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for user</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `user`;</span><br><span class="line">CREATE TABLE `user` (</span><br><span class="line">  `id` int NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) NOT NULL,</span><br><span class="line">  `pwd` varchar(255) NOT NULL,</span><br><span class="line">  `sex` varchar(255) NOT NULL,</span><br><span class="line">  `home` varchar(255) NOT NULL,</span><br><span class="line">  `info` varchar(255) NOT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb3;</span><br><span class="line"></span><br><span class="line">INSERT INTO `user` VALUES (&#x27;1&#x27;, &#x27;ywm&#x27;, &#x27;123&#x27;,&#x27;男&#x27;,&#x27;上海&#x27;);</span><br><span class="line">INSERT INTO `user` VALUES (&#x27;3&#x27;, &#x27;lisi&#x27;, &#x27;123456&#x27;,&#x27;男&#x27;, &#x27;武汉&#x27;);</span><br></pre></td></tr></table></figure>

<p>⑤：创建实体Bean</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class User &#123;</span><br><span class="line">    // 主键</span><br><span class="line">    private Long id;</span><br><span class="line">    // 用户名</span><br><span class="line">    private String name;</span><br><span class="line">    // 密码</span><br><span class="line">    private String pwd;</span><br><span class="line">    // 性別</span><br><span class="line">    private String sex;</span><br><span class="line">    //测试</span><br><span class="line">    private String info;</span><br><span class="line">    //家乡</span><br><span class="line">    private String home;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑥: 定义数据层接口与映射配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface UserDao &#123;</span><br><span class="line"></span><br><span class="line">    @Select(&quot;select * from user&quot;)</span><br><span class="line">    public List&lt;User&gt; getAll();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑦：测试类中注入dao接口，测试功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@SpringBootTest</span><br><span class="line">class Springboot05MybatisApplicationTests &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private UserDao userDao;</span><br><span class="line">    </span><br><span class="line">    @Test</span><br><span class="line">    void contextLoads() &#123;</span><br><span class="line">        List&lt;User&gt; userList = userDao.getAll();</span><br><span class="line">        System.out.println(userList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>⑧：运行测试类</p>
<p>SpringBoot整合MyBatis常见问题处理</p>
<p>SpringBoot版本低于2.4.3(不含)，Mysql驱动版本大于8.0时，需要在url连接串中配置时区</p>
<p>jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;springboot_db?serverTimezone&#x3D;UTC<br>或在MySQL数据库端配置时区解决此问题</p>
<p>1.MySQL 8.X驱动强制要求设置时区</p>
<ul>
<li>修改url，添加serverTimezone设定</li>
<li>修改MySQL数据库配置（略）</li>
</ul>
<p>2.驱动类过时，提醒更换为com.mysql.cj.jdbc.Driver<br>————————————————</p>
<p>总结:</p>
<ol>
<li>勾选MyBatis技术，也就是导入MyBatis对应的starter</li>
<li>数据库连接相关信息转换成配置</li>
<li>数据库SQL映射需要添加@Mapper被容器识别到</li>
</ol>
<p>查看搜索mvnrepository仓库地址</p>
<p><a target="_blank" rel="noopener" href="https://mvnrepository.com/">https://mvnrepository.com/</a></p>
<h5 id="27-SpringBoot整合MyBatisPlus"><a href="#27-SpringBoot整合MyBatisPlus" class="headerlink" title="27-SpringBoot整合MyBatisPlus"></a>27-SpringBoot整合MyBatisPlus</h5><p>①：手动添加SpringBoot整合MyBatis-Plus的坐标，可以通过mvnrepository获取</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.4.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>②：定义数据层接口与映射配置，继承BaseMapper,同时指名泛型类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface UserDao extends BaseMapper&lt;User&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>③：其他同SpringBoot整合MyBatis</p>
<p>小结:</p>
<ol>
<li>手工添加MyBatis-Plus对应的starter；</li>
<li>数据层接口使用BaseMapper简化开发；</li>
<li>需要使用的第三方技术无法通过勾选确定时，需要手工添加坐标；</li>
<li>继承BaseMapper,IService,ServiceImpl，需要传递对应的泛型类，均可以实现增删改查分页等方法，同时兼容mapper.xml原始sql语句写法，更灵活；如果是多表查询，建议用mapper.xml。</li>
</ol>
<h5 id="28-SpringBoot整合Druid"><a href="#28-SpringBoot整合Druid" class="headerlink" title="28-SpringBoot整合Druid"></a>28-SpringBoot整合<a target="_blank" rel="noopener" href="https://blog.csdn.net/Good_omen/article/details/115356892">Druid</a></h5><p>①: 导入Druid对应的starter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.2.6&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>②: 指定数据源类型 (这种方式只需导入一个 Druid 的坐标)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#DB Configuration:</span><br><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">    url: jdbc:mysql://localhost:3306/springboot_db?serverTimezone=UTC</span><br><span class="line">    username: root</span><br><span class="line">    password: 123456</span><br><span class="line">    type: com.alibaba.druid.pool.DruidDataSource</span><br></pre></td></tr></table></figure>

<p><strong>或者 变更Druid的配置方式(推荐) 这种方式需要导入 Druid对应的starter</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  datasource:</span><br><span class="line">    druid:</span><br><span class="line">      driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="line">      url: jdbc:mysql://localhost:3306/springboot_db?serverTimezone=UTC</span><br><span class="line">      username: root</span><br><span class="line">      password: 123456</span><br></pre></td></tr></table></figure>

<p>小结:</p>
<p>1.整合Druid需要导入Druid对应的starter<br>2.根据Druid提供的配置方式进行配置<br>3.整合第三方技术通用方式</p>
<ul>
<li>导入对应的starter</li>
<li>根据提供的配置格式，配置非默认值对应的配置项</li>
</ul>
<h4 id="29-SSMP整合案例制作分析"><a href="#29-SSMP整合案例制作分析" class="headerlink" title="29-SSMP整合案例制作分析"></a>29-SSMP整合案例制作分析</h4><p><img src="https://img-blog.csdnimg.cn/0c7fddc8737f4d0db4c494e7162ba132.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pqX5oGL6Iqx6aaZ,size_20,color_FFFFFF,t_70,g_se,x_16" alt="img"></p>
<p>案例实现方案分析与流程解析</p>
<blockquote>
<ol>
<li>案例实现方案分析<br> 实体类开发————使用Lombok快速制作实体类<br> Dao开发————整合MyBatisPlus，制作数据层测试类（有的写成mapper）<br> Service开发————基于MyBatisPlus进行增量开发，制作业务层测试类<br> Controller开发————基于Restful开发，使用PostMan测试接口功能<br> Controller开发————前后端开发协议制作<br> 页面开发————基于VUE+ElementUI制作，前后端联调，页面数据处理，页面消息处理<br> 列表、新增、修改、删除、分页、查询<br> 项目异常处理<br> 按条件查询————页面功能调整、Controller修正功能、Service修正功能</li>
<li>SSMP案例制作流程解析<br> 先开发基础CRUD功能，做一层测一层<br> 调通页面，确认异步提交成功后，制作所有功能<br> 添加分页功能与查询功能</li>
</ol>
</blockquote>
<p>pom.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  &lt;dependencies&gt;</span><br><span class="line">&lt;!--       mybatis-plus--&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;com.baomidou&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;3.4.3.4&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line"> &lt;!--      sql连接池--&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;com.alibaba&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">           &lt;version&gt;1.2.6&lt;/version&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;mysql&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;</span><br><span class="line">           &lt;scope&gt;runtime&lt;/scope&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">       &lt;dependency&gt;</span><br><span class="line">           &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">           &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">           &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">       &lt;/dependency&gt;</span><br><span class="line">   &lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<p>tbl_book.sql</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `tbl_book`;</span><br><span class="line">CREATE TABLE `tbl_book` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `type` varchar(20) DEFAULT NULL,</span><br><span class="line">  `name` varchar(50) DEFAULT NULL,</span><br><span class="line">  `description` varchar(255) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">-- Records of tbl_book</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;1&#x27;, &#x27;计算机理论&#x27;, &#x27;Spring实战第5版&#x27;, &#x27;Spring入门经典教程,深入理解Spring原理技术内幕&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;2&#x27;, &#x27;计算机理论&#x27;, &#x27;Spring 5核心原理与30个类手写实战&#x27;, &#x27;十年沉淀之作，写Spring精华思想&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;3&#x27;, &#x27;计算机理论&#x27;, &#x27;Spring 5设计模式&#x27;, &#x27;深入Spring源码剖析Spring源码中蕴含的10大设计模式&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;4&#x27;, &#x27;计算机理论&#x27;, &#x27;Spring MVC+ MyBatis开发从入门到项目实战&#x27;, &#x27;全方位解析面向Web应用的轻量级框架,带你成为Spring MVC开发高手&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;5&#x27;, &#x27;计算机理论&#x27;, &#x27;轻量级Java Web企业应用实战&#x27;, &#x27;源码级剖析Spring框架,适合已掌握Java基础的读者&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;6&#x27;, &#x27;计算机理论&#x27;, &#x27;Java核心技术卷|基础知识(原书第11版)&#x27;, &#x27;Core Java第11版，Jolt大奖获奖作品，针对Java SE9、10、 11全面更新&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;7&#x27;, &#x27;计算机理论&#x27;, &#x27;深入理解Java虚拟机&#x27;, &#x27;5个维度全面剖析JVM,面试知识点全覆盖&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;8&#x27;, &#x27;计算机理论&#x27;, &#x27;Java编程思想(第4版)&#x27;, &#x27;Java学习必读经典殿堂级著作!赢得了全球程序员的广泛赞誉&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;9&#x27;, &#x27;计算机理论&#x27;, &#x27;零基础学Java (全彩版)&#x27;, &#x27;零基础自学编程的入门]图书，由浅入深，详解Java语言的编程思想和核心技术&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;10&#x27;, &#x27;市场营销&#x27;, &#x27;直播就该这么做:主播高效沟通实战指南&#x27;, &#x27;李子柒、李佳琦、薇娅成长为网红的秘密都在书中&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;11&#x27;, &#x27;市场营销&#x27;, &#x27;直播销讲实战一本通&#x27;, &#x27;和秋叶一起学系列网络营销书籍&#x27;);</span><br><span class="line">INSERT INTO `tbl_book` VALUES (&#x27;12&#x27;, &#x27;市场营销&#x27;, &#x27;直播带货:淘宝、天猫直播从新手到高手&#x27;, &#x27;一本教你如何玩转直播的书， 10堂课轻松实现带货月入3W+&#x27;);</span><br></pre></td></tr></table></figure>

<p>小结:</p>
<ol>
<li><p>勾选SpringMVC与MySQL坐标</p>
</li>
<li><p>修改配置文件为yml格式</p>
</li>
<li><p>设置端口为80方便访问</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p>31-实体类快速开发（lombok）</p>
<ul>
<li><p>Lombok，一个Java类库，提供了一组注解，简化POJO实体类开发</p>
<pre><code>  &lt;!--lombok--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
      &lt;artifactId&gt;lombok&lt;/artifactId&gt;
  &lt;/dependency&gt;
</code></pre>
</li>
<li><p>常用注解：@Data</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class Book &#123;</span><br><span class="line">    private Integer id;</span><br><span class="line">    private String type;</span><br><span class="line">    private String name;</span><br><span class="line">    private String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>为当前实体类在编译期设置对应的get&#x2F;set方法，toString方法，hashCode方法，equals方法，AllArgsConstructor、NoArgsConstructor构造方法等</li>
</ul>
</li>
</ul>
<p>小结:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 实体类制作</span><br><span class="line">2. 使用lombok简化开发</span><br><span class="line">	导入lombok无需指定版本，由SpringBoot提供版本</span><br><span class="line">	@Data注解</span><br></pre></td></tr></table></figure>



<h5 id="MP项目"><a href="#MP项目" class="headerlink" title="MP项目"></a>MP项目</h5><p>数据层</p>
<p>个人习惯不一样，xxx.dao和xxx.maper一样</p>
<h5 id="33-开启MP运行日志"><a href="#33-开启MP运行日志" class="headerlink" title="33-开启MP运行日志"></a>33-开启MP运行日志</h5><ul>
<li>为方便调试可以开启MyBatisPlus的日志</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mybatis-plus:</span><br><span class="line">  global-config:</span><br><span class="line">    db-config:</span><br><span class="line">      #表前缀识别</span><br><span class="line">      table-prefix: tbl_</span><br><span class="line">      #自增长主键</span><br><span class="line">      id-type: auto</span><br><span class="line">  #开启日志，上线要关闭</span><br><span class="line">  configuration:</span><br><span class="line">    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>

<p>会打印数据库调用日志，<strong>上线需要关闭日志，否则影响系统性能；</strong></p>
<h5 id="34-分页功能"><a href="#34-分页功能" class="headerlink" title="34-分页功能"></a>34-分页功能</h5><ul>
<li>分页操作需要设定分页对象IPage<ul>
<li>IPage对象中封装了分页操作中的所有数据<br>数据<br>当前页码值<br>每页数据总量<br>最大页码值<br>数据总量</li>
</ul>
</li>
<li>分页操作是在MyBatisPlus的常规操作基础上增强得到，内部是动态的拼写<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=SQL%E8%AF%AD%E5%8F%A5&spm=1001.2101.3001.7020">SQL语句</a>，因此需要增强对应的功能，<br>使用MyBatisPlus拦截器实现</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class MyBatisPlusConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public MybatisPlusInterceptor createPageIntercept()&#123;</span><br><span class="line">        //1. 定义 Mp 拦截器</span><br><span class="line">        MybatisPlusInterceptor plusIntercept = new MybatisPlusInterceptor();</span><br><span class="line">        //2. 添加具体的拦截器 分页拦截器</span><br><span class="line">        plusIntercept.addInnerInterceptor(new PaginationInnerInterceptor());</span><br><span class="line">        return plusIntercept;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">void testGetPage() &#123;</span><br><span class="line">    System.out.println(&quot;分页&quot;);</span><br><span class="line">    //需要加分页拦截器配置，才生效</span><br><span class="line">    IPage page = new Page(1, 5);</span><br><span class="line">    IPage selectPage = bookMapper.selectPage(page, null);</span><br><span class="line">    System.out.println(&quot;getCurrent:&quot; + selectPage.getCurrent());</span><br><span class="line">    System.out.println(&quot;getPages:&quot; + selectPage.getPages());</span><br><span class="line">    System.out.println(&quot;getSize:&quot; + selectPage.getSize());</span><br><span class="line">    System.out.println(&quot;getTotal:&quot; + selectPage.getTotal());</span><br><span class="line">    System.out.println(&quot;getRecords:&quot; + selectPage.getRecords());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:/Users/admin019/AppData/Roaming/Typora/typora-user-images/image-20220715162907453.png" alt="image-20220715162907453"></p>
<p>小结:</p>
<ol>
<li>使用IPage封装分页数据</li>
<li>分页操作依赖MyBatisPlus分页拦截器实现功能</li>
<li>借助MyBatisPlus日志查阅执行SQL语句（上线关闭）</li>
</ol>
<h5 id="35-数据层标准开发（Mp条件查询）"><a href="#35-数据层标准开发（Mp条件查询）" class="headerlink" title="35-数据层标准开发（Mp条件查询）"></a>35-数据层标准开发（Mp条件查询）</h5><ul>
<li>使用QueryWrapper对象封装查询条件，推荐使用LambdaQueryWrapper对象，所有查询操作封装成方法调用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">void testGetByCondition1() &#123;</span><br><span class="line">    QueryWrapper&lt;Book&gt; queryWrapper = new QueryWrapper&lt;&gt;();</span><br><span class="line">    queryWrapper.like(&quot;name&quot;, &quot;Java&quot;);</span><br><span class="line">    bookMapper.selectList(queryWrapper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Test</span><br><span class="line">void testGetByCondition2() &#123;</span><br><span class="line">    String keyword = &quot;Java&quot;;</span><br><span class="line">    //LambdaQueryWrapper 比QueryWrapper多了一层列名语法检查，</span><br><span class="line">    LambdaQueryWrapper&lt;Book&gt; wrapper = new LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">   // wrapper.like(Book::getName, keyword);</span><br><span class="line">    wrapper.like(keyword!= null, Book::getName, keyword);//和上面对比，检查keyword是否为空，不为空才查询，</span><br><span class="line">    bookMapper.selectList(wrapper);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>小结:</p>
<ol>
<li>使用QueryWrapper对象封装查询条件</li>
<li>推荐使用LambdaQueryWrapper对象, 检查列名，同时支持传入参数是否为空判断</li>
<li>所有查询操作封装成方法调用</li>
<li><h1 id="查询条件支持动态条件拼装-lt-lt-lt-lt-lt-lt-lt-HEAD-it-x2F-java-x2F-springBoot-x2F-SpringBoot学习-黑马-md"><a href="#查询条件支持动态条件拼装-lt-lt-lt-lt-lt-lt-lt-HEAD-it-x2F-java-x2F-springBoot-x2F-SpringBoot学习-黑马-md" class="headerlink" title="查询条件支持动态条件拼装&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:it&#x2F;java&#x2F;springBoot&#x2F;SpringBoot学习-黑马.md"></a>查询条件支持动态条件拼装<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:it&#x2F;java&#x2F;springBoot&#x2F;SpringBoot学习-黑马.md</h1></li>
</ol>
<p>34- 分页</p>
<p>步骤：1.  配置MyBatisPlus的分页拦截器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">public class MyBatisPlusConfig &#123;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    public MybatisPlusInterceptor createPageIntercept()&#123;</span><br><span class="line">        //1. 定义 Mp 拦截器</span><br><span class="line">        MybatisPlusInterceptor plusIntercept = new MybatisPlusInterceptor();</span><br><span class="line">        //2. 添加具体的拦截器 分页拦截器</span><br><span class="line">        plusIntercept.addInnerInterceptor(new PaginationInnerInterceptor());</span><br><span class="line">        return plusIntercept;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​			2. 使用IPage类获取分页信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//需要加分页拦截器配置，才生效</span><br><span class="line">IPage page = new Page(1, 5);</span><br><span class="line">IPage selectPage = bookMapper.selectPage(page, null);</span><br><span class="line">System.out.println(&quot;getCurrent:&quot; + selectPage.getCurrent());</span><br><span class="line">System.out.println(&quot;getPages:&quot; + selectPage.getPages());</span><br><span class="line">System.out.println(&quot;getSize:&quot; + selectPage.getSize());</span><br><span class="line">System.out.println(&quot;getTotal:&quot; + selectPage.getTotal());</span><br><span class="line">System.out.println(&quot;getRecords:&quot; + selectPage.getRecords());</span><br></pre></td></tr></table></figure>



<p>36- 业务层标准开发（基础CRUD）</p>
<p>调用Services类，在Service实现类完成业务逻辑；</p>
<p>继承MyBatisPlus业务层，带有强大的CRUD等过滤</p>
<p>37-表示层标准开发</p>
<p>controller类，对外接口，和前端交互数据；</p>
<p>38- 表现层数据一致性处理(R对象)</p>
<p>39- 前后端调用（异步请求数据）</p>
<p>40- 图书管理vue+elment-ui页面交互数据（CRUD）</p>
<p>41-异常消息处理</p>
<p>42- 分页功能维护</p>
<p>42- 条件查询</p>
<p><strong>ssmp案例总结</strong></p>
<p><strong>项目创建</strong></p>
<p>1.引导方式建立项目</p>
<p>2.pom添加依赖</p>
<p>3.mysql建立tb_book数据库，</p>
<p>4.修改applicaiotn.yml文件配置</p>
<p><strong>业务开发</strong></p>
<p>5.以mybatis-plus建立数据层mapper&#x2F;dao，业务层service</p>
<p>6.创建表现层controller，对外接口</p>
<p>基于Restful开发，使用Postmani测试跑通功能</p>
<p><strong>前后端联调</strong></p>
<p>7.拷贝资源文件css、js、pages、plugins到resources下static文件夹中，并执行maven-clean操作；（资源文件为vue，element-ui组件）</p>
<p>8.在pages文件夹books.html中，进行请求axios异步操作，进行后台交互；</p>
<p>9.打开浏览器<a target="_blank" rel="noopener" href="http://localhost/pages/books.html">http://localhost:80/pages/books.html</a> ，换成自己的服务器端口号，按F12，然后后按F5,切换到console控制台观察前端日志输出；</p>
<p>10.列表功能</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">//演化</span><br><span class="line">          ////普通列表查询</span><br><span class="line">            // getAll() &#123;</span><br><span class="line">            //     //组织参数，拼接url请求地址</span><br><span class="line">            //     console.log(&quot;条件查询与分页&quot;);</span><br><span class="line">            //     axios.get(&quot;/books/mp&quot;).then((res) =&gt; &#123;</span><br><span class="line">            //             console.log((res.data))</span><br><span class="line">            //             this.dataList = res.data.data;</span><br><span class="line">            //         &#125;</span><br><span class="line">            //     )</span><br><span class="line">            // &#125;,</span><br><span class="line"></span><br><span class="line">            // //分页列表查询</span><br><span class="line">            // getAll() &#123;</span><br><span class="line">            //     //组织参数，拼接url请求地址</span><br><span class="line">            //     console.log(&quot;条件查询与分页&quot;);</span><br><span class="line">            //     axios.get(&quot;/books/mp/&quot; + this.pagination.currentPage + &quot;/&quot; + this.pagination.pageSize).then((res) =&gt; &#123;</span><br><span class="line">            //             console.log((res.data))</span><br><span class="line">            //             //发送异步请求</span><br><span class="line">            //             this.pagination.pageSize = res.data.data.size;</span><br><span class="line">            //             this.pagination.currentPage = res.data.data.current;</span><br><span class="line">            //             this.pagination.total = res.data.data.total;</span><br><span class="line">            //</span><br><span class="line">            //             this.dataList = res.data.data.records;</span><br><span class="line">            //         &#125;</span><br><span class="line">            //     )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            //条件查询和分页列表查询</span><br><span class="line">            getAll() &#123;</span><br><span class="line">                console.log(&quot;条件查询与分页&quot;);</span><br><span class="line">                //组织参数，拼接url请求地址</span><br><span class="line">                param = &quot;?type=&quot; + this.pagination.type;</span><br><span class="line">                param += &quot;&amp;name=&quot; + this.pagination.name;</span><br><span class="line">                param += &quot;&amp;description=&quot; + this.pagination.description;</span><br><span class="line">                console.log(param);</span><br><span class="line">                axios.get(&quot;/books/mp/listByParms/&quot; + this.pagination.currentPage + &quot;/&quot; + 		this.pagination.pageSize+param).then((res) =&gt; &#123;</span><br><span class="line">                        console.log((res.data))</span><br><span class="line">                        //发送异步请求</span><br><span class="line">                        this.pagination.pageSize = res.data.data.size;</span><br><span class="line">                        this.pagination.currentPage = res.data.data.current;</span><br><span class="line">                        this.pagination.total = res.data.data.total;</span><br><span class="line"></span><br><span class="line">                        this.dataList = res.data.data.records;</span><br><span class="line">                    &#125;</span><br><span class="line">                )</span><br></pre></td></tr></table></figure>

<p>11.增加，修改，删除</p>
<p>根据操作结果不同，显示不同操作信息；</p>
<p>删除的时候，同时增加防止误操作弹窗，</p>
<p>12.条件查询、分页查询</p>
<p>业务层代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public IPage&lt;Book&gt; queryByPage(Integer currentPage, Integer pageSize,Book book) &#123;</span><br><span class="line">    LambdaQueryWrapper&lt;Book&gt; wrapper = new LambdaQueryWrapper&lt;&gt;();</span><br><span class="line">    if (book != null) &#123;</span><br><span class="line">        wrapper.like(Strings.isNotEmpty(book.getType()),Book::getType,book.getType());</span><br><span class="line">        wrapper.like(Strings.isNotEmpty(book.getName()),Book::getName,book.getName());</span><br><span class="line">        wrapper.like(Strings.isNotEmpty(book.getDescription()),Book::getDescription,book.getDescription());</span><br><span class="line">    &#125;</span><br><span class="line">    IPage&lt;Book&gt; bookPage = new Page&lt;&gt;(currentPage, pageSize);</span><br><span class="line">    IPage&lt;Book&gt; page = this.page(bookPage, wrapper);</span><br><span class="line">    //如果当前页码值大于总页码值，那么重新执行查询操作，使用最大页码值作为当前页码值</span><br><span class="line">    if (currentPage &gt; bookPage.getPages()) &#123;</span><br><span class="line">        page = queryByPage((int) page.getPages(), pageSize,book);</span><br><span class="line">    &#125;</span><br><span class="line">    return page;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>html页面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pagination: &#123;//分页相关模型数据</span><br><span class="line">    currentPage: 1,//当前页码</span><br><span class="line">    pageSize: 6,//每页显示的记录数</span><br><span class="line">    total: 0,//总记录数</span><br><span class="line">    type: &quot;&quot;,</span><br><span class="line">    name: &quot;&quot;,</span><br><span class="line">    description: &quot;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ul>
<li>当删除数据影响页码显示，需要补救处理；</li>
<li>html页面模糊查询变量跟随分页组件，所以在pagination中自定义了”type,name,description”值，名字自定义；<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>32bbe75be9726d20e6ba270b1feabd5dffae3eee:it&#x2F;java&#x2F;springBoot&#x2F;SpringBoot学习-黑马-基础篇.md</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://zhjun2016.github.io">ajun</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zhjun2016.github.io/2023/04/23/java/springBoot/SpringBoot%E5%AD%A6%E4%B9%A0-%E9%BB%91%E9%A9%AC-%E5%9F%BA%E7%A1%80%E7%AF%87/">https://zhjun2016.github.io/2023/04/23/java/springBoot/SpringBoot%E5%AD%A6%E4%B9%A0-%E9%BB%91%E9%A9%AC-%E5%9F%BA%E7%A1%80%E7%AF%87/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zhjun2016.github.io" target="_blank">逆风而行的蟋蟀</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/23/java/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="微服务"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">微服务</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/23/java/springBoot/SpringBoot%E5%AD%A6%E4%B9%A0-%E9%BB%91%E9%A9%AC-%E5%BA%94%E7%94%A8%E7%AF%87/" title="SpringBoot应用篇"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SpringBoot应用篇</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ajun</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8Bspringboot"><span class="toc-number">1.</span> <span class="toc-text">快速上手springboot</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring-Boot%E7%AE%80%E4%BB%8B"><span class="toc-number">1.0.1.</span> <span class="toc-text">Spring Boot简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAspringBoot%E5%B7%A5%E7%A8%8B%E5%9B%9B%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-number">1.0.2.</span> <span class="toc-text">创建springBoot工程四种方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%90%E8%97%8F%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6-x2F-%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">1.0.3.</span> <span class="toc-text">隐藏指定文件&#x2F;文件夹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#parent%E4%BD%BF%E7%94%A8"><span class="toc-number">1.0.4.</span> <span class="toc-text">parent使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#starter%E4%BD%BF%E7%94%A8"><span class="toc-number">1.0.5.</span> <span class="toc-text">starter使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%85%E5%8A%A9%E5%8A%9F%E8%83%BD"><span class="toc-number">1.0.6.</span> <span class="toc-text">辅助功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%A5-%E7%9F%A5%E8%AF%86%E5%8A%A0%E6%B2%B9%E7%AB%99%E2%80%93Rest%E9%A3%8E%E6%A0%BC%E7%AE%80%E4%BB%8B"><span class="toc-number">1.0.7.</span> <span class="toc-text">[补]知识加油站–Rest风格简介</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE"><span class="toc-number">1.0.8.</span> <span class="toc-text">基础配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E6%A8%A1%E5%9D%97"><span class="toc-number">1.0.9.</span> <span class="toc-text">复制模块</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E9%85%8D%E7%BD%AE%E5%88%B7%E6%96%B0"><span class="toc-number">1.1.</span> <span class="toc-text">动态配置刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-RefreshScope%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.1.1.</span> <span class="toc-text">二、@RefreshScope注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-RefreshScope%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.2.</span> <span class="toc-text">1. @RefreshScope使用注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-RefreshScope%E5%8A%A8%E6%80%81%E5%88%B7%E6%96%B0%E5%A4%B1%E6%95%88"><span class="toc-number">1.3.</span> <span class="toc-text">2. @RefreshScope动态刷新失效</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%8D%E4%BD%BF%E7%94%A8-RefreshScope%E4%B9%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E5%8A%A8%E6%80%81%E5%88%B7%E6%96%B0"><span class="toc-number">1.4.</span> <span class="toc-text">3. 不使用@RefreshScope也能实现动态刷新</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE"><span class="toc-number">1.4.1.</span> <span class="toc-text">属性配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Spring%E4%B8%AD%E7%9A%84-Value%E6%B3%A8%E8%A7%A3%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.4.2.</span> <span class="toc-text">Spring中的@Value注解详解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">1.4.3.</span> <span class="toc-text">配置文件加载优先级</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8-yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.4.</span> <span class="toc-text">在.yml配置文件中获取数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#27-SpringBoot%E6%95%B4%E5%90%88MyBatisPlus"><span class="toc-number">1.4.5.</span> <span class="toc-text">27-SpringBoot整合MyBatisPlus</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#28-SpringBoot%E6%95%B4%E5%90%88Druid"><span class="toc-number">1.4.6.</span> <span class="toc-text">28-SpringBoot整合Druid</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#29-SSMP%E6%95%B4%E5%90%88%E6%A1%88%E4%BE%8B%E5%88%B6%E4%BD%9C%E5%88%86%E6%9E%90"><span class="toc-number">1.5.</span> <span class="toc-text">29-SSMP整合案例制作分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#MP%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">MP项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#33-%E5%BC%80%E5%90%AFMP%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97"><span class="toc-number">1.5.2.</span> <span class="toc-text">33-开启MP运行日志</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#34-%E5%88%86%E9%A1%B5%E5%8A%9F%E8%83%BD"><span class="toc-number">1.5.3.</span> <span class="toc-text">34-分页功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#35-%E6%95%B0%E6%8D%AE%E5%B1%82%E6%A0%87%E5%87%86%E5%BC%80%E5%8F%91%EF%BC%88Mp%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%EF%BC%89"><span class="toc-number">1.5.4.</span> <span class="toc-text">35-数据层标准开发（Mp条件查询）</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E6%94%AF%E6%8C%81%E5%8A%A8%E6%80%81%E6%9D%A1%E4%BB%B6%E6%8B%BC%E8%A3%85-lt-lt-lt-lt-lt-lt-lt-HEAD-it-x2F-java-x2F-springBoot-x2F-SpringBoot%E5%AD%A6%E4%B9%A0-%E9%BB%91%E9%A9%AC-md"><span class="toc-number"></span> <span class="toc-text">查询条件支持动态条件拼装&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:it&#x2F;java&#x2F;springBoot&#x2F;SpringBoot学习-黑马.md</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/23/android%20view%E6%A0%91%E7%BB%93%E6%9E%84%EF%BC%8C%E5%9D%90%E6%A0%87/" title="android view树结构、坐标">android view树结构、坐标</a><time datetime="2023-04-23T02:26:53.000Z" title="发表于 2023-04-23 10:26:53">2023-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/23/Chocolatey%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/" title="Chocolatey介绍、安装、使用">Chocolatey介绍、安装、使用</a><time datetime="2023-04-23T02:26:53.000Z" title="发表于 2023-04-23 10:26:53">2023-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/23/c++%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" title="c++语言学习">c++语言学习</a><time datetime="2023-04-23T02:26:53.000Z" title="发表于 2023-04-23 10:26:53">2023-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/23/hexo%E5%8D%9A%E5%AE%A2%E4%BD%BF%E7%94%A8/" title="hexo博客创建使用">hexo博客创建使用</a><time datetime="2023-04-23T02:26:53.000Z" title="发表于 2023-04-23 10:26:53">2023-04-23</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/04/23/git%E4%BD%BF%E7%94%A8%E6%8F%90%E4%BA%A4/" title="git安装使用">git安装使用</a><time datetime="2023-04-23T02:26:53.000Z" title="发表于 2023-04-23 10:26:53">2023-04-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By ajun</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>